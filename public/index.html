<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <form action="/recipes">
    <select name="recipes" id="">
      <option value="">--</option>
      <option value="name">Name</option>
      <option value="ingredients">Ingredients</option>
      <option value="directions">Directions</option>
      <option value="*">All</option>
    </select>
    <!-- <br>
    <input type="submit" id="subButton"> -->
  </form>
  <h1>Name</h1>
  <h2>Ingredients</h2>
  <h3>Directions</h3>
  <div>
    <form action="/addrecipe">
      <input type="text" name="" id="" placeholder="Name">
      <br>
      <input type="text" name="" id="" placeholder="Ingredients">
      <br>
      <input type="text" name="" id="" placeholder="Directions">
    </form>
    <button>Create New Recipe</button>
  </div>
  <br>

  <span>
    <a href="/recipes">Link</a>
  </span>
  <br>

  <script>
    var recipeName = document.querySelector('h1');
    var ingredients = document.querySelector('h2');
    var directions = document.querySelector('h3');
    var selector = document.querySelector('select');
    function get() {
      let value = selector.value;
      console.log(value);
      let recipeNames = fetch(`/recipes?recipes=${value}`)
        .then(function (response) { return response.json() })
        .then(function (response) {
          console.log(response[0]);
          recipeName.textContent = response[0].name;
          ingredients.textContent = response[0].ingredients;
          directions.textContent = response[0].directions;
        })
        .catch(error => console.error(error))
    }
    // button.addEventListener('click', Grab);
    selector.addEventListener('input', get);
    // var myRequest = new Request('/addrecipe', { method: 'POST' });
    // let createRecipe = fetch(myRequest)
    //   .then(response => {
    //     if (response.status === 200) {
    //       return response.json();
    //     } else {
    //       throw new Error('Something went wrong on API server.');
    //     }
    //   })
    //   .then(response => {
    //     console.debug(response);
    //   }).catch(error => {
    //     console.error(error);
    //   });

  </script>
</body>

</html>